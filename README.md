# google-authenticator-secret-extractor

Get the TOTP secrets exported by google authenticator with a tiny command line executable written in C++

> **Note:** This project and I are in no way affiliated with Google.

This lets you decode the URI generated by Google Authenticator.

## Guide

**Prerequisites:**
* Your phone with Google Authenticator
* A camera
* A QR scanner
    * Android: [ZXing](https://play.google.com/store/apps/details?id=com.google.zxing.client.android)
    * Mac/Win/Linux: [ZBar](https://github.com/mchehab/zbar) (See [issue 22](https://github.com/krissrex/google-authenticator-exporter/issues/22) for usage)


**Getting the secret keys:**
1. Open the Google Authenticator app.
2. Click Settings (three dots, top right), and *Transfer accounts*.
3. Select *Export accounts*.
4. Authenticate, if prompted.
5. Select the accounts you want to export (default is *all*).
6. Click *Next*, and capture a picture of the QR code.
    * **Note:** Screenshots are disabled by the app.
    Use your laptop webcam, a digital camera or another phone.
7. Click *Next*, and repeat step 6 for all QR codes shown (if you have many accounts).
8. Decode the QR codes to obtain the `otpauth-migration://offline?data=...` URI.
9. Run `google_authenticator_secrets_extractor`, followed by the URI as argument.
10. A JSON object is printed on stdout with your accounts and secrets.

## Compilation

```console
# meson setup builddir/ -Dbuildtype=release
# cd builddir
# ninja
# ninja install
```

## References

I found the protobuf definition file in https://github.com/beemdevelopment/Aegis/blob/0046e8827ed80b5cfb79afa3f24115e2f972946a/app/src/main/proto/google_auth.proto.

License: MIT,
**BUT** the protobuf definition file is licensed under GNU GPL 3 code and this depends on it (https://github.com/beemdevelopment/Aegis/blob/0046e8827ed80b5cfb79afa3f24115e2f972946a/app/src/main/proto/google_auth.proto) (https://github.com/beemdevelopment/Aegis/blob/0046e8827ed80b5cfb79afa3f24115e2f972946a/LICENSE)

